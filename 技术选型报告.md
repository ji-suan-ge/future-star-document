# 技术选型报告

## 前端技术介绍

### 开发语言

#### HTML

#### JavaScript

#### CSS

### 开发框架

#### Vue

#### React

#### Angular

### 测试框架

#### JTest

#### Mocha

#### Chai

### 开发插件

#### ElementUI

#### Vue-Router

#### VueX

#### Sass/Scss

#### Less

#### ESLint

#### Babel

#### WebPack

### 包管理工具

#### NPM

#### YARN

## 前端方案比较

### 候选方案

#### 方案一

SSM

#### 方案二

DJango+...

#### 方案三

PHP+...

### 需求一致性分析

### 技术一致性分析

### 协议分析

## 结论

## 后端技术介绍

### 开发语言

#### Python

Python 是一种广泛使用的解释型、高级编程、通用型编程语言。

Python 的设计哲学强调代码的可读性和简洁的语法，尤其是使用空格缩进划分代码块，而非使用大括号或者关键词，对于接触过其他语言的郁闷着来说可能会感觉很怪异。

相比于 C++ 或 Java，Python 让开发者能够用更少的代码表达想法。不管是小型还是大型程序，该语言都试图让程序的结构清晰明了。

总结来说，Python 的设计理念赋予了它简洁的语法，让使用者能很轻松地使用 Python 写出结构清晰的程序。因此使用 Python 来开发网站后台可以提高前期的开发效率。

#### Java

Java 是一种广泛使用的计算机编程语言，拥有跨平台、面向对象、泛型编程的特性，广泛应用于企业级 Web 应用开发和移动应用开发。

Java 不同于一般的编译语言或解释型语言。它首先将源代码编译成字节码，再依赖各种不同平台上的虚拟机来解释执行字节码，从而具有“一次编写，到处运行”的跨平台特性。

### 开发框架

#### Django

Django 是采用 Python 语言开发的 Web 框架。相比于其他的 Python Web 框架，Django 的功能可以说是非常完整的，它提供了服务发布、路由映射、模板引擎、ORM 数据处理的一整套功能。

但是这也意味着 Django 的各模块之间结合得比较紧密，所以在功能强大的同时又是一个相对比较封闭的系统。但是其健全的在线文档及开发社区使开发者在遇到问题时能及时找到解决方法。

Django 的优点有以下几个方面：

- 开发文档非常完善：经过多年的发展与积累，Django 有着广泛的应用和完善的在线文档，开发者在遇到问题时能够快速地从资料库中找到解决方法
- 集成数据访问组件：Django 的 Model 层自带了 ORM 组件，可以将数据模型快速地与数据库进行映射，提供了丰富的对象操作接口
- 管理后台自动生成：Django 提供了自带的数据管理系统，开发者只需进行相应的注册，就可以快速生成简单的数据管理系统。
- 具有表单序列化及验证系统，用于 HTML 表单和适于数据库存储的数据之间的转换。
- 具有缓存框架，并有几种缓存方式可供选择。
- 支持定义中间件，允许对请求处理的各个阶段进行干涉。
- 具有一个序列化系统，能够生成或读取采用 XML 或 JSON 表示的 Django 模型实例。
- 具有用于扩展模板引擎的能力的系统。

#### Flask

Flask 是一个使用 Python 编写的轻量级 Web 应用框架。

Flask 被称为“micro framework”，因为它使用简单的核心，用 extension 增加其他功能。

Flask 没有默认使用的 ORM 框架、表单验证工具。然而，Flask 保留了扩增的弹性，可以用 Flask-extension 加入这些功能：ORM、表单验证工具、文件上传、以及各种开放式身份验证技术。

#### Struts

Apache Struts 2 是一个用于开发 Java EE 网络应用程序的开放源代码网页应用程序架构。它利用并延伸了 Java Servlet API，鼓励开发者采用 MVC 架构。

Struts1设计的第一目标就是使MVC模式应用于web程序设计。在过去10年，Struts在更好的web应用方面所做的工作是值得肯定的。在某些方面，Struts社区注意到这一框架的局限性，所以这个活跃的社区通过对MVC运行模式的重新理解并同时引入一些新的建筑学方面的设计理念后，新的Struts2框架结构更清晰，使用更灵活方便。

这一新的结构包含应用逻辑的横切面拦截器，基于注释的配置以减少和去除XML形式的配置文件，功能强大的表达式语言，支持可更改、可重用UI组件的基于微MVC的标签库。Struts2有两方面的技术优势，一是所有的Struts2应用程序都是基于client/server HTTP交换协议，The Java Servlet API揭示了Java Servlet只是Java API的一个很小子集，这样我们可以在业务逻辑部分使用功能强大的Java语言进行程序设计。

Struts 2提供了对MVC的一个清晰的实现，这一实现包含了很多参与对所以请求进行处理的关键组件，如：拦截器、OGNL表达式语言、堆栈。

但是 Struts2 开发组常被指漏洞修复手法不妥，要么修复后仍有可利用，要么无法修复并长期闲置。

#### Spring Framework

Spring 框架是 Java 平台的一个开源的全栈应用程序框架和控制反转容器实现，一般被直接称为 Spring。

Spring 框架是一个分层架构，由 7 个定义良好的模块组成。Spring 模块构建在核心容器之上，核心容器定义了创建、配置和管理 bean 的方式，如下图所示。

![Spring Framework](./img/spring_framework.png)

该框架的一些核心功能理论上可用于任何 Java 应用，但 Spring 还为基于 Java 企业版平台构建的 Web 应用提供了大量的拓展支持。虽然 Spring 没有直接实现任何的编程模型，但它已经在 Java 社区中广为流行，基本上完全代替了企业级 JavaBeans 模型。

#### Spring MVC

SpringMVC 属于Spring Framework 的系列框架之一。Spring Framework 提供了构建 Web 应用程序的全功能 MVC 模块，而 SpringMVC 就是其中最优秀的 MVC 框架。

自从 Spring 2.5 版本发布后，由于支持注解配置，易用性得到了大幅度的提高；Spring 3.0更加完善，实现了对 Struts 2 的超越。从现阶段来看，SpringMVC 是当前应用最多的 MVC 框架。

下面列出的是使用 Spring 框架主要的好处：

- Spring 不会让你白费力气做重复工作，它真正的利用了一些现有的技术，像ORM 框架、日志框架、JEE、Quartz 和 JDK 计时器，其他视图技术。
- 测试一个用 Spring 编写的应用程序很容易，因为环境相关的代码被移动到这个框架中。此外，通过使用 POJOs，它在使用依赖注入注入测试数据时变得更容易。
- Spring 的 web 框架是一个设计良好的 Web MVC 框架。MVC模式导致应用程序的不同方面(输入逻辑，业务逻辑和UI逻辑)分离，同时提供这些元素之间的松散耦合。
- Spring 对 JavaEE 开发中非常难用的一些 API（JDBC、JavaMail、远程调用等），都提供了封装，使这些API应用难度大大降低。
- Spring 提供了一致的事务管理接口，可向下扩展到（使用一个单一的数据库，例如）本地事务并扩展到全局事务（例如，使用 JTA）。

#### Spring Boot

Spring Boot 是由 Pivotal 团队提供的框架，其设计目的是用来简化新 Spring 应用的初始搭建以及开发过程。该框架使用了特定的方式来进行配置，从而使开发人员不再需要定义样板化的配置。

也就是说 Spring Boot 其实不是一个具有新功能的框架，它的作用只是将 Spring Framework 中的各个框架配置起来，减少开发人员的配置工作，使得 Spring Framework 具有了开箱即用的优点。

#### Hibernate

Hibernate 是一个开放源代码的对象关系映射框架，它对 JDBC 进行了非常轻量级的对象封装，它将 POJO 与数据库表建立映射关系，是一个全自动的 ORM 框架，Hibernate 可以自动生成 SQL 语句，自动执行，使得 Java 程序员可以随心所欲的使用对象编程思维来操纵数据库。


#### Mybatis

MyBatis 也是一个 Java 持久化框架，它通过 XML 描述符或注解把对象与存储过程或 SQL 语句关联起来。

与其他的对象关系映射框架不同，MyBatis 并没有将 Java 对象与数据库表关联起来，而是将 Java 方法与 SQL 语句关联。MyBatis 允许用户充分利用数据库的各种功能，例如存储过程、视图、各种复杂的查询以及某数据库的专有特性。如果要对遗留数据库、不规范的数据库进行操作，或者要完全控制 SQL 的执行，MyBatis 是一个不错的选择。

MyBatis 与 Spring Framework 和 Google Guice 集成，这使开发者免于依赖性问题。

MyBatis 支持声明式数据缓存（declarative data caching）。当一条 SQL 语句被标记为“可缓存”后，首次执行它时从数据库获取的所有数据会被存储在一段高速缓存中，今后执行这条语句时就会从高速缓存中读取结果，而不是再次命中数据库。 MyBatis 提供了基于 Java HashMap 的默认缓存实现，以及用于与OSCache、Ehcache、Hazelcast 和 Memcached 连接的默认连接器。MyBatis 还提供 API 供其他缓存实现使用。

#### Spring Data JPA

Spring Data JPA 是 Spring Data 的子模块。使用 Spring Data，使得基于“repositories”概念的 JPA 实现更简单和容易。Spring Data JPA 的目标是大大简化数据访问层代码的编码。作为使用者，我们只需要编写自己的 repository 接口，接口中包含一些个性化的查询方法，Spring Data JPA 将自动实现查询方法。

JPA 默认使用 Hibernate作为 ORM 实现。所以，一般使用 Spring Data JPA 即会使用 Hibernate。

#### MyBatis Plus

MyBatis Plus（简称 MP）是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。

它具有以下特点：

- 无侵入：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑
- 损耗小：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作
- 强大的 CRUD 操作：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现
- 表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求
- 支持 Lambda 形式调用：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错
- 支持主键自动生成：支持多达 4 种主键策略（内含分布式唯一 ID 生成器-Sequence），可自由配置，完美解决主键问题
- 支持 ActiveRecord 模式：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作
- 支持自定义全局通用操作：支持全局通用方法注入（ Write once, use anywhere ）
- 内置代码生成器：采用代码或者 Maven 插件可快速生成 Mapper、Model、Service、Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用
- 内置分页插件：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询
- 分页插件支持多种数据库：支持 MySQL、MariaDB、Oracle、SQLite、Postgre、SQLServer 等多种数据库
- 内置性能分析插件：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询
- 内置全局拦截插件：提供全表 delete、update 操作智能分析阻断，也可自定义拦截规则，预防误操作

### 测试框架

#### JUnit

JUnit 是一个 Java 编程语言的单元测试框架。JUnit 在测试驱动的开发方面有很重要的发展，是起源于 JUnit 的一个统称为 xUnit 的单元测试框架之一。

它有以下优点：

- 支持基于注解的编程方式，简化项目配置
- 可以书写一系列的测试方法，对项目所有的接口或者方法进行单元测试。
- 启动后，自动化测试，并判断执行结果, 不需要人为的干预。
- 只需要查看最后结果，就知道整个项目的方法接口是否通畅。
- 每个单元测试用例相对独立，由Junit 启动，自动调用。不需要添加额外的调用语句。
- 添加，删除，屏蔽测试方法，不影响其他的测试方法。 开源框架都对JUnit 有相应的支持。

#### unittest

unittest 来自 Python 的标准库，使用简单、功能强大，日常测试需求均能得到很好的满足。在不引入第三方库的情况下，是单元测试的不二之选。

unittest 单元测试框架最早受到 JUnit 的启发，和其他语言的主流单元测试框架有着相似的风格。

它支持测试自动化，多个测试用例共享前置（setUp）和清理（tearDown）代码，聚合多个测试用例到测试集中，并将测试和报告框架独立。

### 包管理工具

#### Maven

Apache Maven，是一个软件项目管理及自动构建工具，由 Apache 软件基金会所提供。基于项目对象模型（缩写：POM）概念，Maven 利用一个中央信息片断能管理一个项目的构建、报告和文档等步骤。

Maven 能够帮助开发者完成以下工作：

- 构建
- 文档生成
- 报告
- 依赖
- SCMs
- 发布
- 分发
- 邮件列表

#### pip

pip 是 Python 包管理工具，该工具提供了对 Python 包的查找、下载、安装、卸载的功能。目前官网提供的 Python 安装包中都内置了 pip 工具。

在开发中可以使用 pip 对 Python 软件包的依赖进行管理。

## 后端方案比较

### 候选方案

我们综合考虑了以上提到的的技术，将其分成了两大类技术栈——Python 技术栈和 Java 技术栈。

从这两个技术栈中我们选出了以下两个解决方案：

#### 方案一

后端的方案一由以下技术组成：

- Python
- Django
- unittest
- pip

很明显，这是由 Python 技术栈组成的方案。Python 语言提供了简单的语法，可以提高程序的开发效率。

通过之前的介绍不难看出，Django 对比于 Flask 来说，默认提供了更多的功能。虽然 Flask 也能通过使用插件的方式来扩展功能，比如 Jinja2、SQLAlchemy 等插件，但是我们考虑到学习成本、插件集成复杂度以及未知的技术风险，我们仍倾向于使用 Django 技术栈，而不是 Flask。

测试框架 unittest 是参考了 JUnit 设计的，它的设计风格与 JUnit 非常地相似，因此使用过JUnit的开发者也能可以快速上手 unittest 框架。

与之配套的包管理工具是 pip 。 pip 可以很好地对 Python 软件包进行管理，包括安装、升级、卸载等操作，基本上可以满足开发中的依赖管理。

#### 方案二

后端的方案二由以下技术组成：

- Java
- Spring Framework
- Spring MVC
- Spring Boot
- Mybatis Plus
- Junit
- Maven

在 Spring 框架和 Struts 框架中我们做了以下对比：

从熟悉程度上来说，我们组员更加熟悉 Spring 框架。

从技术上来分析，两者在拦截请求是有所不同：

Struts：

- Struts2 框架是类级别的拦截，每次请求就会创建一个Action，然后通过Setter，Getter 把 Request 数据注入到属性。
- Struts2 中，一个 Action 对应一个Request、Response上下文，在接收参数时，可以通过属性接收，这说明属性参数是让多个方法共享的。
- Struts2 中 Action 的一个方法可以对应一个 URL，而其类属性却被所有方法共享，这也就无法用注解或其他方式标识其所属方法了。

Spring：

- Spring MVC 是方法级别的拦截，一个方法对应一个 Request 上下文，所以方法直接基本上是独立的，独享 Request、Response 数据。而每个方法同时又和一个 URL 对应，参数的传递是直接注入到方法中的，是方法所独有的。
- 在Spring整合时，Spring MVC 的Controller Bean默认单例模式Singleton，所以默认对所有的请求，只会创建一个Controller，有应为没有共享的属性，所以是线程安全的。

由于我们的项目是采用前后端分离的方式进行开发的，Spring MVC 在拦截请求时是方法级别的拦截，一个方法对应一个 Request 上下文，而方法同时又跟一个 URL 对应，所以说从架构本身上 Spring MVC 就容易实现 RESTful API。而 Struts2 是类级别的拦截，一个类对应一个 Request 上下文，这导致了 Struts 不是不可以实现 RESTful API，但是相比于 Spring MVC 要费劲，因为 Struts2 Action 的一个方法可以对应一个 URL，而其类属性却被所有方法共享，这也就无法用注解或其他方式标识其所属方法了。

其次从性能上考虑，Spring会稍微比Struts快。就像上面所说的 Spring MVC 是基于方法的设计，而 Sturts 是基于类。这导致了两者在拦截请求时的实现方式不同，因此也带来了性能上的差异。

综上分析，我们选择了Spring框架作为开发框架。

MyBatis 是一款优秀的持久层框架，它支持定制化 SQL、存储过程以及高级映射。MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集。

Hibernate 是一个自动化更强、更高级的框架，在 Java 代码层面上，省去了绝大部分 SQL 编写，取而代之的是用面向对象的方式操作关系型数据库的数据。而 MyBatis 则是一个能够灵活编写 SQL 语句，并将 SQL 的入参和查询结果映射成 POJOs 的一个持久层框架。从表面上看，Hibernate 能方便、自动化更强，而 MyBatis 在 SQL 语句编写方面则更灵活自由。

而 MyBatis Plus 则是 MyBatis 的增强版，兼具了 Hibernate 和 Mybatis 的优点，使用 MyBatis Plus 既可以享受 ORM 框架的开发的便捷性，在一些特殊场景又能定制SQL语句。

因此我们选择了 MyBatis Plus 作为此方案的持久层解决方案。

测试框架我们选择了使用较多的 JUnit，JUnit 是 Java 应用开发中很常用的的单元测试工具，从它的名字就能看出来它就是专门为单元测试而生的，它的优点在前面也已经介绍的很详细了。

与 Java 配套的包管理是Maven。Maven能够帮助我们完成我们所需的功能，而且实际上 Maven 也被大多数的开源库分发方式所支持，因此我们选择 Maven 作为我们的依赖管理工具。


### 需求一致性分析

### 技术一致性分析

### 协议分析

## 结论

